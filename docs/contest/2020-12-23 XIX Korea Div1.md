# [XIX Open Cup named after E.V. Pankratiev. Grand Prix of Korea](https://codeforc.es/)

| 排名   | 当场过题数 | 至今过题数 | 总题数 |
| ------ | ---------- | ---------- | ------ |
| 61/158 | 8          | 10         | 13     |

## **A**

**upsolved by JJLeo**

### 题意

给出一颗 $n$ 个点的树，一开始每条边都没有颜色，$q$ 次操作将一个点到根节点的所有边染为颜色 $c$ ($1 \le c \le C$)，每次操作后问有多少种颜色满足恰好有 $m$ 条边是该颜色。$(1 \le n,q,C \le 2 \times {10}^5)$

### 题解

树剖，轻边直接每次改即可，每条重链维护一个栈，表示连续段的颜色的最深点，从栈顶到栈底深度递增，每次更改暴力将栈顶深度更浅的元素弹出，再将新的颜色插入，这个过程中维护每种颜色覆盖的边即可。

每次操作最多加入 $O(\log n)$ 个元素，均摊复杂度 $O(q \log n)$。

## **B**

**solved by 2sozx JJLeo**

### 题意

给定一个由 $n \times m$ 的滑冰场，有一些点是障碍，每次移动沿上下左右四个方向移动，必须沿该方向移动到碰到障碍或到边界为止。有一些地方是关键点，现在给定起点，问从该点出发是否存在一种方案经过所有关键点至少一次。($1 \le n,m \le 50$)

### 题解

暴力连边，每条边用 bitset 记录一下经过了哪些关键点，然后 tarjan 缩点，每个强连通分量用 bitset 记录所有内部的关键点，从起始点开始在 DAG 上 dp，每次优先选 1 的个数多的后继状态，看最后 bitset 是否全 1 即可。

正确性不严谨证明：一个 1 一旦错过就补不过来了，因此如果存在方案那么选多的一定可以，如果不存在方案那么即使选多的也不行。

## **C**

**upsolved by **

### 题意



### 题解



## **D**

**solved by 2sozx Bazoka13 JJLeo**

### 题意



### 题解



## **E**

**upsolved by **

### 题意



### 题解



## **F**

**upsolved by **

### 题意



### 题解



## **G**

**upsolved by **

### 题意



### 题解



## **H**

**upsolved by **

### 题意



### 题解



## **I**

**upsolved by **

### 题意



### 题解



## **J**

**upsolved by **

### 题意



### 题解



## **K**

**upsolved by **

### 题意



### 题解



## **L**

**solved by 2sozx**

### 题意

给定一个长度为 $n(n\le10^5)$ 的序列，每次从序列头部出发，以单调不减或单调减向右移动，不能移动时停止，形成一个段。如果此时移动的长度小于一个值 $M$，则将长度补到 $M$，问对于不同的 $M$ 这个序列会形成几段，并且长度一共补了多少。

### 题解

先预处理一下每个点能最长移动到多远，对于每个 $M$ 求一下，复杂度为调和级数。

## **M**

**solved by **

### 题意



### 题解



## **记录**

0min：分题<br>?min：MJX看B很水但是不好写先看别的题<br>?min：看I签到MJX去写，写挂了，ZYF冲H<br>29min：ZYF AC，MJX写L，CSK推I<br>67min：MJX AC，CSK冲I<br>93min：CSK AC，ZYF先冲B<br>?min：想到了F，ZYF冲F<br>?min：WA F，ZYF冲B<br>142min：ZYF AC，拿到B一血，发现F题读错了<br>149min：ZYF AC，猜E结论<br>211min：CSK猜结论冲E，AC，ZYF冲M，MJX CSK猜D结论<br>256min：ZYF WA on46，MJX不知道咋做的猜二分范围小了，猜对了，AC<br>292min：MJX WA4 后AC<br>till end：拿了一血就很帅，不亏



## **总结**

